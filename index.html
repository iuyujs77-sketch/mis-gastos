<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Finance lite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; -webkit-tap-highlight-color: transparent; }
        .dark-bg { background-color: #0b141e; } /* Fondo exacto de la imagen */
        .card-glass { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.08); backdrop-filter: blur(10px); }
        .gold-text { color: #d4af37; }
        .gold-bg { background: #d4af37; }
        .animate-up { animation: slideUp 0.4s ease-out forwards; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        input::placeholder { color: #4b5563; }
    </style>
</head>
<body class="dark-bg text-white pb-24 overflow-x-hidden">
    <div id="app"></div>

    <nav class="fixed bottom-0 left-0 right-0 dark-bg border-t border-white/5 px-10 py-5 flex justify-between items-center z-50 shadow-2xl">
        <button onclick="cambiarVista('home')" class="flex flex-col items-center gap-1 opacity-50 hover:opacity-100 transition">
            <span class="text-xl">锔</span>
            <span class="text-[9px] font-bold uppercase tracking-widest">Inicio</span>
        </button>
        <button onclick="cambiarVista('metas')" class="relative -top-4">
             <div class="w-14 h-14 rounded-full border-2 border-white/10 flex items-center justify-center dark-bg shadow-xl">
                <div id="nav-logo" class="w-10 h-10 rounded-full flex items-center justify-center gold-text font-bold border border-gold-text/30">F</div>
             </div>
        </button>
        <button onclick="cambiarVista('config')" class="flex flex-col items-center gap-1 opacity-50 hover:opacity-100 transition">
            <span class="text-xl"></span>
            <span class="text-[9px] font-bold uppercase tracking-widest">Ajustes</span>
        </button>
    </nav>

    <script>
        // --- PEGA AQU TU LOGO EN BASE64 ---
        const LOGO_BASE64 = ""; // Pega aqu铆 el c贸digo que copies de la web de Base64

        let config = JSON.parse(localStorage.getItem('f_dark_config')) || {
            nombre: "Usuario",
            metodos: ['AMEX', 'BBVA', 'EFECTIVO'],
            categorias: ['Comida', 'Super', 'Gym', 'Varios'],
            conceptosIngreso: ['Nomina', 'Bono'],
            metas: [{ nombre: "Viaje a Tokyo", monto: 50000, fecha: "2026-12-31" }]
        };
        let movimientos = JSON.parse(localStorage.getItem('f_dark_movs')) || [];
        let vistaActual = 'home';
        let tipoActual = 'gasto';

        function render() {
            const container = document.getElementById('app');
            container.innerHTML = '';
            if (vistaActual === 'metas') renderMetas(container);
            else if (vistaActual === 'config') renderConfig(container);
            else renderHome(container);
            
            // Inyectar logo si existe
            if(LOGO_BASE64) {
                const logos = document.querySelectorAll('#nav-logo, #header-logo');
                logos.forEach(el => el.innerHTML = `<img src="${LOGO_BASE64}" class="w-full h-full rounded-full object-cover">`);
            }
        }

        function renderHome(c) {
            const stats = calcularStats();
            c.innerHTML = `
                <div class="pt-12 px-8 mb-8 animate-up">
                    <div class="flex items-center gap-4">
                        <div id="header-logo" class="w-14 h-14 rounded-full border border-white/10 flex items-center justify-center bg-slate-800 text-xl gold-text font-bold">F</div>
                        <h2 class="text-xl font-medium text-slate-300">Hola, ${config.nombre}</h2>
                    </div>
                </div>

                <div class="px-8 mb-8 animate-up" style="animation-delay: 0.1s">
                    <h3 class="text-xs font-bold text-slate-500 uppercase tracking-widest mb-4">Expantos por accunte</h3>
                    <div class="flex gap-4 overflow-x-auto no-scrollbar pb-2">
                        ${config.metodos.map(m => `
                            <div class="min-w-[150px] bg-white p-5 rounded-xl flex flex-col justify-between h-28 shadow-lg">
                                <div class="flex items-center gap-2">
                                    <div class="w-6 h-6 rounded bg-blue-600 flex items-center justify-center text-[8px] text-white font-bold">${m[0]}</div>
                                    <span class="text-[10px] font-extrabold text-slate-800 uppercase">${m}</span>
                                </div>
                                <div>
                                    <p class="text-[8px] text-slate-400 font-bold mb-1 italic">Balance Actual</p>
                                    <p class="text-xl font-extrabold text-slate-900">$${(stats.porCuenta[m] || 0).toLocaleString()}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="px-8 mb-10 animate-up" style="animation-delay: 0.2s">
                    ${config.metas.length > 0 ? `
                        <div class="bg-white rounded-2xl p-6 flex items-center gap-5 shadow-xl">
                            <div class="w-16 h-16 rounded-full border border-slate-100 flex items-center justify-center text-2xl"></div>
                            <div class="flex-1">
                                <h4 class="text-slate-900 font-extrabold text-lg">${config.metas[0].nombre}</h4>
                                <div class="w-full bg-slate-100 h-1.5 rounded-full mt-3 overflow-hidden">
                                    <div class="h-full gold-bg" style="width: 45%"></div>
                                </div>
                                <div class="flex justify-between mt-2 text-[9px] font-bold text-slate-400 uppercase">
                                    <span>Progreso</span>
                                    <span>$${parseFloat(config.metas[0].monto).toLocaleString()}</span>
                                </div>
                            </div>
                        </div>
                    ` : ''}
                </div>

                <div class="px-8 animate-up" style="animation-delay: 0.3s">
                    <h3 class="text-xs font-bold text-slate-500 uppercase tracking-widest mb-4">Nuevo Movimiento</h3>
                    <div class="card-glass rounded-[35px] p-8 space-y-6 shadow-2xl">
                        <div class="flex border-b border-white/5 pb-4">
                             <input type="number" id="monto" inputmode="decimal" placeholder="Monto" class="bg-transparent text-4xl font-extrabold outline-none w-full text-center placeholder:text-slate-700">
                        </div>
                        <div class="grid grid-cols-1 gap-4">
                            <select id="cat" class="bg-transparent border-b border-white/5 py-3 text-sm outline-none text-slate-300">
                                ${(tipoActual === 'gasto' ? config.categorias : config.conceptosIngreso).map(c => `<option class="bg-slate-900" value="${c}">${c}</option>`).join('')}
                            </select>
                            <select id="metodo" class="bg-transparent border-b border-white/5 py-3 text-sm outline-none text-slate-300">
                                ${config.metodos.map(m => `<option class="bg-slate-900" value="${m}">${m}</option>`).join('')}
                            </select>
                            <input type="text" id="desc" placeholder="Descripci贸n" class="bg-transparent border-b border-white/5 py-3 text-sm outline-none text-slate-300">
                        </div>
                        <button onclick="registrar()" class="w-full gold-bg text-slate-900 py-4 rounded-xl font-extrabold uppercase tracking-widest text-xs active:scale-95 transition">Registrar Transacci贸n</button>
                    </div>
                </div>
            `;
        }

        // --- LGICA REUTILIZADA ---
        function calcularStats() {
            let total = 0; let porCuenta = {};
            movimientos.forEach(m => {
                const monto = parseFloat(m.monto);
                if (m.tipo === 'ingreso') total += monto; else total -= monto;
                if (!porCuenta[m.metodo]) porCuenta[m.metodo] = 0;
                if (m.tipo === 'gasto') porCuenta[m.metodo] += monto;
            });
            return { totalBalance: total, porCuenta };
        }

        function registrar() {
            const m = document.getElementById('monto').value;
            if(!m) return;
            movimientos.unshift({ monto: m, tipo: tipoActual, desc: document.getElementById('desc').value, cat: document.getElementById('cat').value, metodo: document.getElementById('metodo').value, fecha: new Date().toISOString() });
            save(); render();
        }

        function save() { localStorage.setItem('f_dark_config', JSON.stringify(config)); localStorage.setItem('f_dark_movs', JSON.stringify(movimientos)); }
        function cambiarVista(v) { vistaActual = v; render(); }
        function renderConfig(c) { 
            c.innerHTML = `<div class="p-10 text-center animate-up"><h2 class="text-2xl font-bold mb-10">Ajustes</h2><button onclick="localStorage.clear(); location.reload();" class="text-red-500 font-bold uppercase">Resetear App</button></div>`;
        }
        function renderMetas(c) {
             c.innerHTML = `<div class="p-10 text-center animate-up"><h2 class="text-2xl font-bold mb-10">Mis Objetivos</h2><p class="text-slate-400">Panel de metas pr贸ximamente...</p></div>`;
        }

        render();
    </script>
</body>
</html>
