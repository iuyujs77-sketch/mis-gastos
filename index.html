<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Finance √âlite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; -webkit-tap-highlight-color: transparent; background-color: #0b141e; color: white; }
        .dark-bg { background-color: #0b141e; }
        /* Estilo de las tarjetas blancas de la imagen */
        .card-white { background-color: #ffffff; border-radius: 16px; padding: 20px; color: #1a202c; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3); }
        .gold-text { color: #d4af37; }
        .gold-bg { background: #d4af37; }
        .form-input { background: transparent; border-bottom: 1px solid rgba(255,255,255,0.1); padding: 12px 0; width: 100%; outline: none; font-size: 14px; }
        .form-input::placeholder { color: #4b5563; }
        .animate-up { animation: slideUp 0.4s ease-out forwards; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="pb-32 overflow-x-hidden">
    <div id="app"></div>

    <nav class="fixed bottom-0 left-0 right-0 dark-bg border-t border-white/5 px-10 py-6 flex justify-between items-center z-50">
        <button onclick="cambiarVista('home')" class="flex flex-col items-center gap-1 opacity-50">
            <span class="text-xl">‚öíÔ∏è</span>
            <span class="text-[9px] font-bold uppercase tracking-widest text-white">Inicio</span>
        </button>
        <button onclick="cambiarVista('home')" class="relative -top-6">
             <div class="w-16 h-16 rounded-full border-2 border-white/10 flex items-center justify-center dark-bg shadow-2xl">
                <div class="w-12 h-12 rounded-full border border-gold-text/30 flex items-center justify-center font-bold gold-text text-xl bg-slate-800">F</div>
             </div>
        </button>
        <button onclick="cambiarVista('config')" class="flex flex-col items-center gap-1 opacity-50">
            <span class="text-xl">‚öôÔ∏è</span>
            <span class="text-[9px] font-bold uppercase tracking-widest text-white">Ajustes</span>
        </button>
    </nav>

    <script>
        // --- ESTADO ---
        let config = JSON.parse(localStorage.getItem('e360_config')) || {
            nombre: "Usuario",
            metodos: ['AMEX', 'BBVA', 'EFECTIVO'],
            categorias: ['Comida', 'S√∫per', 'Gasolina', 'Mantenimiento'],
            metas: [{ nombre: "Viaje a Tokyo", monto: 50000, fecha: "2026-12-31" }]
        };
        let movimientos = JSON.parse(localStorage.getItem('e360_movs')) || [];
        let vistaActual = 'home';
        let tipoActual = 'gasto';

        function render() {
            const container = document.getElementById('app');
            if (vistaActual === 'config') renderConfig(container);
            else renderHome(container);
        }

        function renderHome(c) {
            const total = movimientos.reduce((acc, m) => m.tipo === 'ingreso' ? acc + parseFloat(m.monto) : acc - parseFloat(m.monto), 0);
            
            c.innerHTML = `
                <div class="pt-12 px-8 mb-10 animate-up">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 rounded-full border border-gold-text/50 flex items-center justify-center bg-slate-800 font-bold gold-text text-xl">F</div>
                        <h2 class="text-xl font-medium text-slate-300">Hola, ${config.nombre}</h2>
                    </div>
                </div>

                <div class="px-8 mb-8 animate-up">
                    <h3 class="text-[10px] font-bold text-slate-500 uppercase tracking-[0.2em] mb-4 text-center">Gastos por cuenta</h3>
                    <div class="flex gap-4 overflow-x-auto no-scrollbar pb-4">
                        ${config.metodos.map(m => {
                            const gastado = movimientos.filter(mov => mov.metodo === m && mov.tipo === 'gasto').reduce((a, b) => a + parseFloat(b.monto), 0);
                            return `
                                <div class="min-w-[140px] card-white flex flex-col justify-between h-28 shadow-lg">
                                    <div class="flex items-center gap-2">
                                        <div class="w-6 h-6 rounded bg-blue-600 flex items-center justify-center text-[8px] text-white font-bold">${m[0]}</div>
                                        <span class="text-[10px] font-extrabold text-slate-800 uppercase tracking-tighter">${m}</span>
                                    </div>
                                    <div>
                                        <p class="text-[8px] text-slate-400 font-bold italic mb-1">Gasto total</p>
                                        <p class="text-lg font-extrabold text-slate-900">$${gastado.toLocaleString()}</p>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>

                <div class="px-8 mb-12 animate-up">
                    <div class="card-white flex items-center gap-5">
                        <div class="w-14 h-14 rounded-full border border-slate-100 flex items-center justify-center text-2xl bg-slate-50 shadow-inner">üáØüáµ</div>
                        <div class="flex-1">
                            <h4 class="text-slate-900 font-extrabold text-base">${config.metas[0].nombre}</h4>
                            <div class="w-full bg-slate-100 h-1.5 rounded-full mt-3 overflow-hidden">
                                <div class="h-full gold-bg" style="width: 45%"></div>
                            </div>
                            <div class="flex justify-between mt-2 text-[8px] font-bold text-slate-400 uppercase tracking-widest">
                                <span>Progreso</span>
                                <span>$${parseFloat(config.metas[0].monto).toLocaleString()}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="px-8 animate-up">
                    <h3 class="text-[10px] font-bold text-slate-500 uppercase tracking-[0.2em] mb-4">Nuevo Movimiento</h3>
                    <div class="space-y-4 bg-white/5 p-6 rounded-[30px] border border-white/5 shadow-2xl">
                        <input type="number" id="monto" inputmode="decimal" placeholder="Monto" class="form-input text-2xl font-bold text-white border-white/10">
                        
                        <select id="cat" class="form-input text-slate-300">
                            <option value="" disabled selected>Categor√≠a</option>
                            ${config.categorias.map(c => `<option class="bg-slate-900" value="${c}">${c}</option>`).join('')}
                        </select>

                        <select id="metodo" class="form-input text-slate-300">
                            <option value="" disabled selected>M√©todo de Pago</option>
                            ${config.metodos.map(m => `<option class="bg-slate-900" value="${m}">${m}</option>`).join('')}
                        </select>

                        <input type="text" id="desc" placeholder="Descripci√≥n" class="form-input text-slate-300">

                        <div class="flex gap-4 mt-6">
                            <button onclick="tipoActual='gasto'; registrar()" class="flex-1 gold-bg text-slate-900 py-4 rounded-xl font-bold uppercase text-[10px] shadow-lg active:scale-95 transition">Registrar Gasto</button>
                            <button onclick="tipoActual='ingreso'; registrar()" class="flex-1 bg-white text-slate-900 py-4 rounded-xl font-bold uppercase text-[10px] shadow-lg active:scale-95 transition">Ingreso</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function registrar() {
            const m = document.getElementById('monto').value;
            const met = document.getElementById('metodo').value;
            if(!m || !met) return alert('Ingresa monto y m√©todo');
            
            movimientos.unshift({ 
                monto: m, 
                tipo: tipoActual, 
                desc: document.getElementById('desc').value, 
                cat: document.getElementById('cat').value, 
                metodo: met, 
                fecha: new Date().toISOString() 
            });
            localStorage.setItem('e360_movs', JSON.stringify(movimientos));
            render();
        }

        function cambiarVista(v) { vistaActual = v; render(); }

        function renderConfig(c) {
            c.innerHTML = `
                <div class="p-8 animate-up">
                    <h1 class="text-2xl font-extrabold mb-8">Ajustes</h1>
                    <div class="card-white space-y-6">
                        <button onclick="localStorage.clear(); location.reload();" class="w-full bg-red-500 text-white py-4 rounded-xl font-bold uppercase text-xs">Resetear Todo</button>
                        <button onclick="cambiarVista('home')" class="w-full bg-slate-800 text-white py-4 rounded-xl font-bold uppercase text-xs">Volver</button>
                    </div>
                </div>`;
        }

        render();
    </script>
</body>
</html>
